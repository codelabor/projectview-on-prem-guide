# 1 서버
## 1-1 운영체제 및 유틸리티 SW 설치

2개의 USB 플래시 드라이브를 사용하는 걸 가정한다.
* Ubuntu 설치용 USB 플래시 드라이브
* ProjectView 설치용 USB 플래시 드라이브

### OS 설치
#### Ubuntu

Ubuntu는 Server, Desktop, Core, Cloud 버전이 있다.
여기서는 설치 후 웹브라우저도 동작을 확인하는 등 사용성을 고려하여 Desktop 버전을 기준으로 설명한다.

##### Ubuntu Desktop 22.04.4 LTS (Jammy Jellyfish)
* 인터넷 사용 어려운 환경에서 사용할 것
* 설치 과정에서 한국어를 선택하면 설치 후에 한국어 사용 가능함


##### Ubuntu Desktop 24.04 LTS (The Noble Numbat) 
* 인터넷 사용이 가능한 환경에서 사용할 것
* 설치 과정에서 한국어를 선택해도 설치가 제대로 되지 않음
* 설치 후 settings에서 언어 추가해서 다운로드 받아야 함

이 문서에서는 인터넷 접속이 불가능한 환경을 고려하여 22.04.4 LTS 버전을 기준으로 설명한다.

설치용 ISO 파일을 다운로드 받고 부팅 가능한 USB 플래시 드라이브 만드는 방법은 아래 내용을 참고한다.
* https://ubuntu.com/download/desktop#how-to-install

##### USB 플래시 드라이브로 OS 설치

* 설치할 장비에 Ubuntu 설치용 USB 플래시 드라이브 삽입 후 재부팅
* 재부팅 시 CMOS 설정 진입 
  * 장비 벤더별 CMOS 설정 방법 참고 (예: 삼성 PC는 부팅 후 F2 키 눌러서 진입)
  * 부팅 순서를 USB 플래시 드라이브가 우선하도록 설정 (예: 'UEFI: USB' 선택)
  * CMOS 설정 내용 저장 후 종료
* 재부팅 후 OS 설치 진행

###### 설치 과정 중 주요 선택 사항  

* 언어: 한국어
* 키보드 레이아웃 : 한국어
* 설치 유형: Ubuntu 설치
* 사용자 계정 설정
  * 컴퓨터 이름: projectview (프로젝트에서 정의 가능)
  * 이름: projectview (프로젝트에서 정의 가능)
  * 암호: projectview (프로젝트에서 정의 가능)
* Ubuntu Pro 구독: skip for now

설치가 완료되면 Ubuntu 설치용 플래시 드라이브를 제거한 후 재부팅한다.

##### 한글 입력기 설정
* Settings > Keyboard 실행
* Input Sources: Korean 삭제
* Input Sources: 한국어(Hangul) 우측 메뉴 버튼 클릭
* Preferences 메뉴 클릭
* iBusHangul Setup 창 > Hangul 탭 > Hangul Toggle Key 항목에서 기존 항목 삭제
* Add 버튼 클릭, 한영키 누르면 'Alt_R'이 등록됨
* Apply 클릭, OK 클릭

### 설치 관련 파일 복사
ProjectView USB 플래시 드라이브의 내용을 다운로드 폴더에 복사한다.
```
projectview@projectview:~/다운로드$ ls
 certificate   chrome   docker   documents   projectview  utility  'vs code'

```

#### 필수 유틸리티 SW 설치
##### Chrome
chrome 브라우저를 설치한다.

###### 패키지 파일로 설치
패키지 파일을 확인한다.
```
projectview@projectview:~/다운로드$ cd chrome
projectview@projectview:~/다운로드/chrome$ ls
google-chrome-stable_current_amd64.deb
```
패키지 파일을 설치한다.
```
projectview@projectview:~/다운로드/chrome$ sudo dpkg -i *.deb
[sudo] password for projectview: 
Selecting previously unselected package google-chrome-stable.
(데이터베이스 읽는중 ...현재 162930개의 파일과 디렉터리가 설치되어 있습니다.)
Preparing to unpack google-chrome-stable_current_amd64.deb ...
Unpacking google-chrome-stable (123.0.6312.122-1) ...
google-chrome-stable (123.0.6312.122-1) 설정하는 중입니다 ...
update-alternatives: using /usr/bin/google-chrome-stable to provide /usr/bin/x-www-browser (x-www-browser) in auto mode
update-alternatives: using /usr/bin/google-chrome-stable to provide /usr/bin/gnome-www-browser (gnome-www-browser) in auto mode
update-alternatives: using /usr/bin/google-chrome-stable to provide /usr/bin/google-chrome (google-chrome) in auto mode
Processing triggers for mailcap (3.70+nmu1ubuntu1) ...
Processing triggers for gnome-menus (3.36.0-1ubuntu3) ...
Processing triggers for desktop-file-utils (0.26-1ubuntu3) ...
Processing triggers for man-db (2.10.2-1) ...
projectview@projectview:~/다운로드/chrome$ 

```
##### Docker
docker 플랫폼을 설치한다.

###### 패키지 파일로 설치
Ubuntu 버전에 맞는 패키지 파일을 확인한다.
```
projectview@projectview:~/다운로드/docker$ ls
'22.04.4 LTS'  '24.04 LTS'
projectview@projectview:~/다운로드/docker$ cd '22.04.4 LTS'
projectview@projectview:~/다운로드/docker/22.04.4 LTS$ ls
containerd.io_1.6.31-1_amd64.deb
docker-buildx-plugin_0.14.0-1~ubuntu.22.04~jammy_amd64.deb
docker-ce-cli_26.1.2-1~ubuntu.22.04~jammy_amd64.deb
docker-ce_26.1.2-1~ubuntu.22.04~jammy_amd64.deb
docker-compose-plugin_2.27.0-1~ubuntu.22.04~jammy_amd64.deb
```

패키지 파일을 설치한다.
```
projectview@projectview:~/다운로드/docker/22.04.4 LTS$ sudo dpkg -i *.deb
Selecting previously unselected package containerd.io.
(데이터베이스 읽는중 ...현재 163043개의 파일과 디렉터리가 설치되어 있습니다.)
Preparing to unpack containerd.io_1.6.31-1_amd64.deb ...
Unpacking containerd.io (1.6.31-1) ...
Selecting previously unselected package docker-buildx-plugin.
Preparing to unpack docker-buildx-plugin_0.14.0-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-buildx-plugin (0.14.0-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package docker-ce-cli.
Preparing to unpack docker-ce-cli_26.1.2-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-ce-cli (5:26.1.2-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package docker-ce.
Preparing to unpack docker-ce_26.1.2-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-ce (5:26.1.2-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package docker-compose-plugin.
Preparing to unpack docker-compose-plugin_2.27.0-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-compose-plugin (2.27.0-1~ubuntu.22.04~jammy) ...
containerd.io (1.6.31-1) 설정하는 중입니다 ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
docker-buildx-plugin (0.14.0-1~ubuntu.22.04~jammy) 설정하는 중입니다 ...
docker-ce-cli (5:26.1.2-1~ubuntu.22.04~jammy) 설정하는 중입니다 ...
docker-ce (5:26.1.2-1~ubuntu.22.04~jammy) 설정하는 중입니다 ...
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /lib/systemd/system/docker.service.
Created symlink /etc/systemd/system/sockets.target.wants/docker.socket → /lib/systemd/system/docker.socket.
docker-compose-plugin (2.27.0-1~ubuntu.22.04~jammy) 설정하는 중입니다 ...
Processing triggers for man-db (2.10.2-1) ...
projectview@projectview:~/다운로드/docker/22.04.4 LTS$ 
 
```

### 버전 확인
아래 명령어로 버전을 확인한다.
```
projectview@projectview:~$ sudo docker version
Client: Docker Engine - Community
 Version:           26.0.0
 API version:       1.45
 Go version:        go1.21.8
 Git commit:        2ae903e
 Built:             Wed Mar 20 15:17:48 2024
 OS/Arch:           linux/amd64
 Context:           default

Server: Docker Engine - Community
 Engine:
  Version:          26.0.0
  API version:      1.45 (minimum version 1.24)
  Go version:       go1.21.8
  Git commit:       8b79278
  Built:            Wed Mar 20 15:17:48 2024
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.6.28
  GitCommit:        ae07eda36dd25f8a1b98dfbf587313b99c0190bb
 runc:
  Version:          1.1.12
  GitCommit:        v1.1.12-0-g51d5e94
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0

```

### 사용자 그룹 추가
docker 구동, 종료 시 sudo 명령 사용을 생략하고 싶다면 docker 그룹에 projectview 계정을 추가한다.
```
projectview@projectview:~$ sudo usermod -aG docker projectview
[sudo] password for projectview: 
```

해당 계정을 로그아웃하고 재로그인하거나 다음 명령으로 그룹 변경 사항을 업데이트한다.
가상 머신을 사용하는 경우 가상 머신 재구동이 필요할 수 있다.

```
projectview@projectview:~$ newgrp docker
```

사용자 계정 아래의 .docker 디렉토리 전체를 삭제하거나 (재생성됨) 아래 명령으로 소유권과 권한을 변경한다.

```
projectview@projectview:~$ sudo chown "$USER":"$USER" /home/"$USER"/.docker -R
projectview@projectview:~$ sudo chmod g+rwx "$HOME/.docker" -R
```

sudo 명령을 쓰지 않고 도커 구동이 가능한지 확인한다.

```
projectview@projectview:~$ docker run hello-world
```

##### 기타 필수 유틸리티
필수 유틸리티를 설치한다.

###### 패키지 파일로 설치
패키지 파일을 확인한다.

```
projectview@projectview:~/다운로드$ cd utility
projectview@projectview:~/다운로드/utility$ ls
net-tools_2.10-0.1_amd64.deb
```
패키지 파일을 설치한다.
```
projectview@projectview:~/다운로드/utility$ sudo dpkg -i *.deb
Selecting previously unselected package net-tools.
(데이터베이스 읽는중 ...현재 163275개의 파일과 디렉터리가 설치되어 있습니다.)
Preparing to unpack net-tools_2.10-0.1_amd64.deb ...
Unpacking net-tools (2.10-0.1) ...
net-tools (2.10-0.1) 설정하는 중입니다 ...
Processing triggers for man-db (2.10.2-1) ...
projectview@projectview:~/다운로드/utility$ 

```

#### 선택 유틸리티 SW 설치
##### Visual Studio Code
GUI를 쓸 수 있는 Ubuntu Desktop인 경우 편집기로 Visual Studio Code를 사용할 수 있다.

###### 패키지 파일로 설치
패키지 파일을 확인한다.
```
projectview@projectview:~/다운로드/vs code$ ls
code_1.88.1-1712771838_amd64.deb  markdown-preview-enhanced-0.8.13.vsix

```
패키지를 설치한다.
```
projectview@projectview:~/다운로드/vs code$ sudo dpkg -i *.deb
Selecting previously unselected package code.
(데이터베이스 읽는중 ...현재 163330개의 파일과 디렉터리가 설치되어 있습니다.)
Preparing to unpack code_1.88.0-1712152114_amd64.deb ...
Unpacking code (1.88.0-1712152114) ...
code (1.88.0-1712152114) 설정하는 중입니다 ...
Processing triggers for mailcap (3.70+nmu1ubuntu1) ...
Processing triggers for gnome-menus (3.36.0-1ubuntu3) ...
Processing triggers for desktop-file-utils (0.26-1ubuntu3) ...
Processing triggers for shared-mime-info (2.1-2) ...
projectview@projectview:~/다운로드/vs code$ 

```

##### Visual Studio Code Extensions
필요에 따라 Visual Studio Code Extensions를 설치한다.

* VS Code 실행
* VS Code 왼쪽 메뉴 '확장(Extensions)' 메뉴 선택
* 확장 팬 우측 '...' 메뉴 선택
* 메뉴에서 'VSIX에서 설치...(Install from VSIX...)' 선택
* 아래 vsix 파일 선택

###### Markdown Preview

마크다운 파일 뷰어를 설치한다.
```
projectview@projectview:~/다운로드/vs code$ ls
code_1.88.1-1712771838_amd64.deb  markdown-preview-enhanced-0.8.13.vsix
```